#!/bin/bash
# –û—Ç–ª–∞–¥–∫–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

echo "üîß –û—Ç–ª–∞–¥–∫–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
echo -e "\nüìã –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:"
docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ nginx
echo -e "\nüìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ nginx (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 20 —Å—Ç—Ä–æ–∫):"
docker logs --tail 20 agb_nginx

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ backend
echo -e "\nüìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ backend (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 20 —Å—Ç—Ä–æ–∫):"
docker logs --tail 20 agb_backend

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx
echo -e "\nüìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx:"
docker exec agb_nginx cat /etc/nginx/nginx.conf

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–ª—É—à–∞–µ—Ç –ª–∏ backend –ø–æ—Ä—Ç 8000
echo -e "\nüìã –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ backend —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 8000:"
docker exec agb_backend netstat -tlnp | grep :8000

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å backend –∏–∑ nginx –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
echo -e "\nüìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ backend –∏–∑ nginx:"
docker exec agb_nginx curl -v http://backend:8000/api/health

# –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ nginx
echo -e "\nüìã –¢–µ—Å—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ nginx:"
curl -v http://localhost/api/health

echo -e "\n‚úÖ –û—Ç–ª–∞–¥–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
